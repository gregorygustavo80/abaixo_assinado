<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Abaixo-Assinado: Mais EspaÃ§os Pet-Friendly na Nossa Cidade!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
</head>
<body class="bg-gray-100 p-4">
  <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg">
    <div class="flex flex-col md:flex-row justify-between items-start">
      <div class="w-full md:w-2/3">
        <h1 class="text-xl font-bold mb-2">ğŸ¶ Abaixo-Assinado: Mais EspaÃ§os Pet-Friendly na Nossa Cidade! ğŸ¾</h1>
        <p class="text-blue-600">Para: Prefeitura Municipal de MossorÃ³</p>
        <p class="mt-4">NÃ³s, moradores e jovens cidadÃ£os de MossorÃ³, gostarÃ­amos de sugerir a criaÃ§Ã£o de mais espaÃ§os pet-friendly em nossa cidade...</p>
        <p class="mt-4">Nossa proposta Ã© simples e cheia de carinho: que nossos amigos de quatro patas tambÃ©m possam aproveitar a cidade com conforto e seguranÃ§a.</p>
        <ul class="list-disc list-inside mt-4">
          <li>InstalaÃ§Ã£o de bebedouros e lixeiras especiais para pets;</li>
          <li>CriaÃ§Ã£o de Ã¡reas cercadas para cachorros brincarem soltos com seguranÃ§a;</li>
          <li>Eventos comunitÃ¡rios que incentivem a adoÃ§Ã£o responsÃ¡vel;</li>
          <li>SinalizaÃ§Ã£o adequada para Ã¡reas pet-friendly.</li>
        </ul>
        <p class="mt-4">Cuidar dos animais e criar espaÃ§os para convivÃªncia entre pets e pessoas Ã© uma forma de tornar a cidade mais amigÃ¡vel, inclusiva e saudÃ¡vel.</p>
        <p class="mt-4">Se vocÃª tambÃ©m apoia essa ideia, assine e compartilhe com outras pessoas!</p>

        <!-- BotÃ£o para mostrar a caixa de comentÃ¡rio -->
        <button id="btn-mostrar-comentario" class="mt-4 bg-blue-600 text-white py-2 px-4 rounded">
          Adicionar ComentÃ¡rio
        </button>

        <!-- Caixa de comentÃ¡rio com campo de nome -->
        <div id="caixa-comentario" class="mt-4 hidden">
          <label for="autor" class="block text-gray-700">Seu nome:</label>
          <input id="autor" type="text" class="w-full border border-gray-300 rounded p-2 mt-2" placeholder="Digite seu nome..." />

          <label for="comentario" class="block text-gray-700 mt-4">ComentÃ¡rio:</label>
          <textarea id="comentario" class="w-full border border-gray-300 rounded p-2 mt-2" rows="4" placeholder="Digite seu comentÃ¡rio..."></textarea>

          <button id="btn-comentario" class="mt-2 bg-green-600 text-white py-2 px-4 rounded">Enviar</button>
        </div>

        <!-- FormulÃ¡rio de assinatura -->
        <div class="mt-4">
          <label for="name" class="block text-gray-700">Nome:</label>
          <input id="name" type="text" class="w-full border border-gray-300 rounded p-2 mt-2"/>
          <label for="neighborhood" class="block text-gray-700 mt-4">Bairro:</label>
          <input id="neighborhood" type="text" class="w-full border border-gray-300 rounded p-2 mt-2"/>
          <label for="pet" class="block text-gray-700 mt-4">VocÃª tem pet? Qual?</label>
          <input id="pet" type="text" class="w-full border border-gray-300 rounded p-2 mt-2"/>
          <button id="btn-assinar" class="mt-4 bg-blue-600 text-white py-2 px-4 rounded">Assinar abaixo-assinado</button>
        </div>

        <!-- Lista de Assinaturas -->
        <div class="mt-10">
          <h2 class="text-lg font-bold text-gray-700 mb-2">ğŸ“‹ Assinaturas recentes:</h2>
          <ul class="list-disc list-inside bg-gray-50 p-4 rounded border">
            {% for nome, bairro, pet in assinaturas %}
              <li><strong>{{ nome }}</strong> ({{ bairro }}) â€” Pet: {{ pet }}</li>
            {% else %}
              <li>Nenhuma assinatura ainda.</li>
            {% endfor %}
          </ul>
        </div>

        <!-- Lista de ComentÃ¡rios -->
        <div class="mt-10">
          <h2 class="text-lg font-bold text-gray-700 mb-2">ğŸ’¬ ComentÃ¡rios enviados:</h2>
          <ul class="list-disc list-inside bg-gray-50 p-4 rounded border">
            {% for texto, autor in comentarios %}
              <li><strong>{{ autor }}:</strong> {{ texto }}</li>
            {% else %}
              <li>Nenhum comentÃ¡rio ainda.</li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <!-- Coluna lateral -->
      <div class="md:ml-6 mt-6 md:mt-0 w-full md:w-1/3 bg-orange-100 p-4 rounded-lg shadow-lg">
        <div class="text-center">
          <p class="text-2xl font-bold">{{ assinaturas|length }}</p>
          <p class="text-sm">pessoas jÃ¡ assinaram</p>
        </div>
        <div class="mt-4 text-center">
          <p class="text-sm">Criado por: Centro Educacional Alfa â€“ Suyanne Gondim</p>
          <a href="mailto:suyannecarvalho97@gmail.com" class="text-blue-600 text-sm block">Contate o autor</a>
          <a href="tel:+558499172928" class="text-blue-600 text-sm block mt-1">Telefone: (84) 99172928</a>
        </div>
      </div>
    </div>

    <div class="mt-4 text-xs text-gray-600">
      <p>PETIÃ‡ÃƒO pÃºblica. <strong>ğŸ¶ Abaixo-Assinado: Mais EspaÃ§os Pet-Friendly na Nossa Cidade! ğŸ¾</strong></p>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Mostrar caixa de comentÃ¡rio
    document.getElementById('btn-mostrar-comentario').addEventListener('click', () => {
      document.getElementById('caixa-comentario').classList.remove('hidden');
    });

    // Enviar assinatura
    document.getElementById('btn-assinar').addEventListener('click', async () => {
      const nome = document.getElementById('name').value;
      const bairro = document.getElementById('neighborhood').value;
      const pet = document.getElementById('pet').value;

      await fetch('/assinar', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nome, bairro, pet })
      });

      alert("Assinatura enviada!");
      location.reload();
    });

    // Enviar comentÃ¡rio
    document.getElementById('btn-comentario').addEventListener('click', async () => {
      const autor = document.getElementById('autor').value;
      const comentario = document.getElementById('comentario').value;

      await fetch('/comentario', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ autor, comentario })
      });

      alert("ComentÃ¡rio enviado!");
      location.reload();
    });
  </script>
</body>
</html>
